{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"header-container shadow-md\"\n};\nconst _hoisted_2 = {\n  class: \"p-fluid\"\n};\nconst _hoisted_3 = {\n  class: \"p-field mb-4\"\n};\nconst _hoisted_4 = {\n  class: \"p-field mb-6\"\n};\nconst _hoisted_5 = {\n  class: \"p-field button-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Button = _resolveComponent(\"Button\");\n  const _component_Menubar = _resolveComponent(\"Menubar\");\n  const _component_InputText = _resolveComponent(\"InputText\");\n  const _component_Dialog = _resolveComponent(\"Dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" Menu Bar (always visible, but menu items will be filtered) \"), _createVNode(_component_Menubar, {\n    model: $options.filteredMenuItems\n  }, {\n    start: _withCtx(() => _cache[4] || (_cache[4] = [_createElementVNode(\"span\", {\n      class: \"text-xl font-bold text-gray-800\"\n    }, \"Solid Waste Management System\", -1 /* HOISTED */)])),\n    end: _withCtx(() => [_createCommentVNode(\" Button to trigger the login modal if not logged in, or logout if logged in \"), !$data.isLoggedIn ? (_openBlock(), _createBlock(_component_Button, {\n      key: 0,\n      label: \"Login\",\n      icon: \"pi pi-user\",\n      class: \"p-button-outlined p-button-lg\",\n      onClick: _cache[0] || (_cache[0] = $event => $data.showLoginModal = true)\n    })) : _createCommentVNode(\"v-if\", true), $data.isLoggedIn ? (_openBlock(), _createBlock(_component_Button, {\n      key: 1,\n      label: \"Logout\",\n      icon: \"pi pi-sign-out\",\n      class: \"p-button-outlined p-button-lg\",\n      onClick: $options.logout\n    }, null, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\"])]), _createCommentVNode(\" Login Modal \"), _createVNode(_component_Dialog, {\n    header: \"Login\",\n    visible: $data.showLoginModal,\n    \"onUpdate:visible\": _cache[3] || (_cache[3] = $event => $data.showLoginModal = $event),\n    modal: \"\",\n    class: \"login-modal p-dialog-lg\",\n    style: {\n      \"width\": \"40vw\",\n      \"max-width\": \"500px\"\n    }\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" Logo \"), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n      class: \"flex justify-center mb-6\"\n    }, [_createElementVNode(\"img\", {\n      src: \"assets/logo.png\",\n      alt: \"Logo\",\n      class: \"h-25 w-auto\"\n    })], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" email Field \"), _createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n      for: \"email\",\n      class: \"block text-lg font-medium text-gray-700 mb-2\"\n    }, \"Email\", -1 /* HOISTED */)), _createVNode(_component_InputText, {\n      id: \"email\",\n      modelValue: $data.email,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.email = $event),\n      placeholder: \"Enter your email\",\n      class: \"p-inputtext-lg w-full\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _createCommentVNode(\" Password Field \"), _createElementVNode(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n      for: \"password\",\n      class: \"block text-lg font-medium text-gray-700 mb-2\"\n    }, \"Password\", -1 /* HOISTED */)), _createVNode(_component_InputText, {\n      type: \"password\",\n      id: \"password\",\n      modelValue: $data.password,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.password = $event),\n      placeholder: \"Enter your password\",\n      class: \"p-inputtext-lg w-full\",\n      feedback: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _createCommentVNode(\" Button Container \"), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_Button, {\n      label: \"Login\",\n      icon: \"pi pi-sign-in\",\n      class: \"p-button-lg p-button-success w-full login-btn\",\n      onClick: $options.login\n    }, null, 8 /* PROPS */, [\"onClick\"])])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createCommentVNode","_createVNode","_component_Menubar","model","$options","filteredMenuItems","start","_withCtx","_cache","end","$data","isLoggedIn","_createBlock","_component_Button","key","label","icon","onClick","$event","showLoginModal","logout","_","_component_Dialog","header","visible","modal","style","default","src","alt","_hoisted_2","_hoisted_3","for","_component_InputText","id","modelValue","email","placeholder","_hoisted_4","type","password","feedback","_hoisted_5","login"],"sources":["C:\\Users\\darle\\solid-waste-management-system\\src\\components\\Header.vue"],"sourcesContent":["<template>\r\n  <div class=\"header-container shadow-md\">\r\n    <!-- Menu Bar (always visible, but menu items will be filtered) -->\r\n    <Menubar :model=\"filteredMenuItems\">\r\n      <template #start>\r\n        <span class=\"text-xl font-bold text-gray-800\">Solid Waste Management System</span>\r\n      </template>\r\n      <template #end>\r\n        <!-- Button to trigger the login modal if not logged in, or logout if logged in -->\r\n        <Button \r\n          v-if=\"!isLoggedIn\" \r\n          label=\"Login\" \r\n          icon=\"pi pi-user\" \r\n          class=\"p-button-outlined p-button-lg\" \r\n          @click=\"showLoginModal = true\" \r\n        />\r\n        <Button \r\n          v-if=\"isLoggedIn\" \r\n          label=\"Logout\" \r\n          icon=\"pi pi-sign-out\" \r\n          class=\"p-button-outlined p-button-lg\" \r\n          @click=\"logout\" \r\n        />\r\n      </template>\r\n    </Menubar>\r\n  </div>\r\n\r\n  <!-- Login Modal -->\r\n  <Dialog \r\n    header=\"Login\" \r\n    v-model:visible=\"showLoginModal\" \r\n    modal \r\n    class=\"login-modal p-dialog-lg\" \r\n    style=\"width: 40vw; max-width: 500px;\">\r\n  \r\n    <!-- Logo -->\r\n    <div class=\"flex justify-center mb-6\">\r\n      <img src=\"assets/logo.png\" alt=\"Logo\" class=\"h-25 w-auto\" />\r\n    </div>\r\n    \r\n    <div class=\"p-fluid\">\r\n      <!-- email Field -->\r\n      <div class=\"p-field mb-4\">\r\n        <label for=\"email\" class=\"block text-lg font-medium text-gray-700 mb-2\">Email</label>\r\n          <InputText \r\n            id=\"email\" \r\n            v-model=\"email\" \r\n            placeholder=\"Enter your email\" \r\n            class=\"p-inputtext-lg w-full\" />\r\n      </div>\r\n\r\n      <!-- Password Field -->\r\n      <div class=\"p-field mb-6\">\r\n        <label for=\"password\" class=\"block text-lg font-medium text-gray-700 mb-2\">Password</label>\r\n          <InputText \r\n            type=\"password\" \r\n            id=\"password\" \r\n            v-model=\"password\" \r\n            placeholder=\"Enter your password\" \r\n            class=\"p-inputtext-lg w-full\" \r\n            feedback />\r\n      </div>\r\n\r\n      <!-- Button Container -->\r\n      <div class=\"p-field button-container\">\r\n        <Button \r\n          label=\"Login\" \r\n          icon=\"pi pi-sign-in\" \r\n          class=\"p-button-lg p-button-success w-full login-btn\" \r\n          @click=\"login\" />\r\n      </div>\r\n    </div>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"HeaderVue\",\r\n  data() {\r\n    return {\r\n      showLoginModal: false, // Controls modal visibility\r\n      isLoggedIn: false, // Indicates if the user is logged in\r\n      email: '', // email input field\r\n      password: '', // Password input field\r\n      userRole: 'CZN', // Default to CZN if no user is logged in\r\n      menuItems: [\r\n        { label: 'Announcement', icon: 'pi pi-megaphone', command: () => this.navigateTo('AnnouncementPage') },\r\n        { label: 'Concerns', icon: 'pi pi-comments', command: () => this.navigateTo('ConcernPage') },\r\n        { label: 'Messages', icon: 'pi pi-envelope', command: () => this.navigateTo('MessagePage') },\r\n        { label: 'Reports and Analytics', icon: 'pi pi-file', command: () => this.navigateTo('ReportPage') },\r\n        { label: 'Account Management', icon: 'pi pi-users', command: () => this.navigateTo('AccountManagementPage') },\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    filteredMenuItems() {\r\n      // Filter menu items based on the user's role\r\n      if (!this.isLoggedIn) {\r\n        return []; // No menu items are shown when not logged in\r\n      }\r\n\r\n      // Filter according to the role\r\n      if (this.userRole === 'LGU') {\r\n        return this.menuItems.filter(item => item.label !== 'Reports and Analytics' && item.label !== 'Concerns' && item.label !== 'Account Management');\r\n      }\r\n      if (this.userRole === 'BGY_admin') {\r\n        return this.menuItems.filter(item => item.label !== 'Reports and Analytics' && item.label !== 'Account Management');\r\n      }\r\n      if (this.userRole === 'DVR') {\r\n        return this.menuItems.filter(item => item.label === 'Messages');\r\n      }\r\n      if (this.userRole === 'CZN') {\r\n        return this.menuItems.filter(item => item.label === 'Announcement');\r\n      }\r\n      return this.menuItems; // Default for super admin and anyone else with all access\r\n    }\r\n  },\r\n  methods: {\r\n    async login() {\r\n      try {\r\n        const response = await axios.post('http://127.0.0.1:8000/api/login', {\r\n          email: this.email,\r\n          password: this.password,\r\n        });\r\n\r\n        // Store the token in localStorage\r\n        localStorage.setItem('auth_token', response.data.token);\r\n\r\n        // Set token in the default axios header for subsequent requests\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${response.data.token}`;\r\n        \r\n        this.isLoggedIn = true; // Set login state to true\r\n        this.showLoginModal = false; // Close the modal after login\r\n        // Optionally redirect or update the UI\r\n        this.$router.push('/dashboard');\r\n      } catch (error) {\r\n        console.error('Login failed:', error);\r\n      }\r\n    },\r\n    logout() {\r\n      // Handle logout logic\r\n      console.log('Logging out');\r\n      this.isLoggedIn = false; // Set login state to false\r\n      this.userRole = 'CZN'; // Reset to default role when logged out\r\n    },\r\n    navigateTo(route) {\r\n      console.log(`Navigating to ${route}`);\r\n      // Replace with actual navigation logic, e.g.,\r\n      this.$router.push(`/${route}`);\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}