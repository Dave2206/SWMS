(function(){"use strict";var e={8866:function(e,t,s){s(8992),s(3949);var a=s(5130),o=s(6768);const n={id:"app"},l={class:"page-container"};function r(e,t,s,a,r,i){const c=(0,o.g2)("HeaderVue"),d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(c),(0,o.Lk)("div",l,[(0,o.bF)(d)])])}const i={class:"p-fluid"},c={class:"p-field mb-4"},d={class:"p-field mb-6"},u={class:"p-field button-container"};function m(e,t,s,a,n,l){const r=(0,o.g2)("Button"),m=(0,o.g2)("Menubar"),g=(0,o.g2)("InputText"),p=(0,o.g2)("Dialog"),h=(0,o.g2)("Toast");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(m,{model:l.filteredMenuItems},{start:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.Lk)("span",{class:"text-xl font-bold text-gray-800"},"Solid Waste Management System",-1)]))),end:(0,o.k6)((()=>[n.isLoggedIn?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(r,{key:0,label:"Login",icon:"pi pi-user",class:"p-button-outlined p-button-lg",onClick:t[0]||(t[0]=e=>n.showLoginModal=!0)})),n.isLoggedIn?((0,o.uX)(),(0,o.Wv)(r,{key:1,label:"Logout",icon:"pi pi-sign-out",class:"p-button-outlined p-button-lg",onClick:l.logout},null,8,["onClick"])):(0,o.Q3)("",!0)])),_:1},8,["model"]),(0,o.bF)(p,{header:"Login",visible:n.showLoginModal,"onUpdate:visible":t[3]||(t[3]=e=>n.showLoginModal=e),modal:"",class:"login-modal p-dialog-lg",style:{width:"40vw","max-width":"500px"}},{default:(0,o.k6)((()=>[t[7]||(t[7]=(0,o.Lk)("div",{class:"flex justify-center mb-6"},[(0,o.Lk)("img",{src:"assets/logo.png",alt:"Logo",class:"h-25 w-auto"})],-1)),(0,o.Lk)("div",i,[(0,o.Lk)("div",c,[t[5]||(t[5]=(0,o.Lk)("label",{for:"email",class:"block text-lg font-medium text-gray-700 mb-2"},"Email",-1)),(0,o.bF)(g,{id:"email",modelValue:n.email,"onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),placeholder:"Enter your email",class:"p-inputtext-lg w-full"},null,8,["modelValue"])]),(0,o.Lk)("div",d,[t[6]||(t[6]=(0,o.Lk)("label",{for:"password",class:"block text-lg font-medium text-gray-700 mb-2"},"Password",-1)),(0,o.bF)(g,{type:"password",id:"password",modelValue:n.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),placeholder:"Enter your password",class:"p-inputtext-lg w-full"},null,8,["modelValue"])]),(0,o.Lk)("div",u,[(0,o.bF)(r,{label:"Login",icon:"pi pi-sign-in",class:"p-button-lg p-button-success w-full login-btn",onClick:l.login},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,o.bF)(h,{ref:"toast"},null,512)],64)}s(4114),s(4520),s(1454);var g=s(4373),p={name:"HeaderVue",data(){return{showLoginModal:!1,isLoggedIn:!1,email:"",password:"",abilities:[]}},computed:{filteredMenuItems(){return this.abilities.map((e=>{const t={announcement:{label:"Announcement",icon:"pi pi-megaphone",page:"AnnouncementPage"},messages:{label:"Messages",icon:"pi pi-comments",page:"MessagePage"},account_management:{label:"Account Management",icon:"pi pi-users",page:"AccountManagementPage"},concern:{label:"Concerns",icon:"pi pi-comments",page:"ConcernPage"},reports_and_analytics:{label:"Reports and Analytics",icon:"pi pi-file",page:"ReportPage"},complain:{label:"Complain",icon:"pi pi-folder-open",page:"ComplainPage"},routes:{label:"Routes",icon:"pi pi-folder-open",page:"RoutesPage"}},s=t[e];return s?{label:s.label,icon:s.icon,command:()=>this.navigateTo(s.page)}:null})).filter((e=>null!==e))}},methods:{async login(){try{const e=await g.A.post("http://127.0.0.1:8000/api/login",{email:this.email,password:this.password});localStorage.setItem("auth_token",e.data.access_token),g.A.defaults.headers.common["Authorization"]=`Bearer ${localStorage.getItem("auth_token")}`,this.isLoggedIn=!0,this.showLoginModal=!1,this.$refs.toast.add({severity:"success",summary:"Login successfully",detail:"Login successfully",life:3e3}),await this.fetchAbilities(),this.$router.push("/DashboardPage")}catch(e){this.$refs.toast.add({severity:"error",summary:"Login failed",detail:e.response.data.message,life:3e3})}},logout(){localStorage.removeItem("auth_token"),this.isLoggedIn=!1,this.abilities=[],this.$router.push("/")},async fetchAbilities(){try{const e=await g.A.get("http://127.0.0.1:8000/api/user/access-levels");this.abilities=e.data.access_levels||[]}catch(e){console.error("Error fetching abilities:",e),this.abilities=[]}},navigateTo(e){this.$router.push({name:e})}},async mounted(){const e=localStorage.getItem("auth_token");e&&(g.A.defaults.headers.common["Authorization"]=`Bearer ${e}`,this.isLoggedIn=!0,await this.fetchAbilities())}},h=s(1241);const b=(0,h.A)(p,[["render",m],["__scopeId","data-v-191efc3e"]]);var f=b,y={name:"App",components:{HeaderVue:f}};const v=(0,h.A)(y,[["render",r]]);var k=v,x=s(7440),C=s(288),L=s(7646),w=s(2065),A=s(478),D=s(6338),_=s(5531),F=s(1775),E=s(8212),T=s(373),S=s(4127),j=s(2899),V=s(2160),I=s(8333),P=s(217),M=s(3956),X=s(5242),$=s(4571),U=s(1839),R=s(8326),B=s(2046),W=s(896),N=s(3293),Q=s(8098),O=s(1387);const K={class:"complaint-form"},z={class:"form-container"},q={class:"p-field"},G={class:"p-field"},J={class:"p-field"},H={class:"p-field"},Y={class:"p-field"};function Z(e,t,s,n,l,r){const i=(0,o.g2)("Select"),c=(0,o.g2)("InputText"),d=(0,o.g2)("Button"),u=(0,o.g2)("Textarea"),m=(0,o.g2)("FileUpload"),g=(0,o.g2)("Toast");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",K,[(0,o.Lk)("div",z,[t[11]||(t[11]=(0,o.Lk)("h2",null,"Submit a Solid Waste Disposal Complaint",-1)),(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>r.submitComplaint&&r.submitComplaint(...e)),["prevent"]))},[(0,o.Lk)("div",q,[t[6]||(t[6]=(0,o.Lk)("label",{for:"subject"},"Subject:",-1)),(0,o.bF)(i,{modelValue:l.form.subject,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.subject=e),options:l.subjectOptions,optionLabel:"label",optionValue:"value",placeholder:"Select Subject",required:"",class:"w-full"},null,8,["modelValue","options"])]),(0,o.Lk)("div",G,[t[7]||(t[7]=(0,o.Lk)("label",{for:"email"},"Email:",-1)),(0,o.bF)(c,{modelValue:l.form.email,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.email=e),id:"email",type:"email",placeholder:"Enter your email",required:"",class:"w-full"},null,8,["modelValue"])]),(0,o.Lk)("div",J,[t[8]||(t[8]=(0,o.Lk)("label",{for:"address"},"Address:",-1)),(0,o.bF)(c,{modelValue:l.form.address,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.address=e),id:"address",type:"text",placeholder:"Fetching address...",readonly:"",class:"w-full"},null,8,["modelValue"]),(0,o.bF)(d,{label:"Get My Location",icon:"pi pi-map-marker",onClick:r.getLocation,class:"p-button-text p-button-sm"},null,8,["onClick"])]),(0,o.Lk)("div",H,[t[9]||(t[9]=(0,o.Lk)("label",{for:"description"},"Description:",-1)),(0,o.bF)(u,{modelValue:l.form.description,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.description=e),id:"description",rows:"5",placeholder:"Describe the issue",required:"",class:"w-full"},null,8,["modelValue"])]),(0,o.Lk)("div",Y,[t[10]||(t[10]=(0,o.Lk)("label",{for:"file"},"Attachment:",-1)),(0,o.bF)(m,{modelValue:l.form.file,"onUpdate:modelValue":t[4]||(t[4]=e=>l.form.file=e),name:"file",chooseLabel:"Choose File",uploadLabel:"Upload",class:"w-full"},null,8,["modelValue"])]),(0,o.bF)(d,{label:"Submit Complaint",type:"submit",icon:"pi pi-send",class:"p-button-rounded p-button-success w-full"})],32)])]),(0,o.bF)(g,{ref:"toast"},null,512)],64)}var ee={name:"ComplainPage",data(){return{subjectOptions:[{label:"Garbage not picked up",value:"Garbage not picked up"},{label:"No garbage pickup truck",value:"No garbage pickup truck"},{label:"Request for garbage pickup",value:"Request for garbage pickup"},{label:"Too many garbage on the streets",value:"Too many garbage on the streets"}],form:{subject:null,email:"",address:"",description:"",file:null}}},methods:{async getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const t=e.coords.latitude,s=e.coords.longitude;this.fetchAddress(t,s)}),(e=>{console.error("Geolocation error:",e),alert("Unable to fetch your location.")})):alert("Geolocation is not supported by this browser.")},async fetchAddress(e,t){try{const s=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&addressdetails=1`),a=await s.json();a&&a.address&&(this.form.address=`${a.address.road||""}, ${a.address.city||""}, ${a.address.country||""}`)}catch(s){console.error("Error fetching address:",s)}},showSuccessToast(e){this.$refs.toast.add({severity:"success",summary:"Success",detail:e,life:3e3})},showErrorToast(e){this.$refs.toast.add({severity:"error",summary:"Error",detail:e,life:3e3})},async submitComplaint(){const e=new FormData;e.append("subject",this.form.subject),e.append("email",this.form.email),e.append("address",this.form.address),e.append("description",this.form.description),this.form.file&&e.append("file",this.form.file);try{const t=await g.A.post("http://127.0.0.1:8000/api/complaints",e,{headers:{"Content-Type":"multipart/form-data"}});this.showSuccessToast(t.data.message)}catch(t){this.showErrorToast(t.response.data.message)}}}};const te=(0,h.A)(ee,[["render",Z],["__scopeId","data-v-e33e6314"]]);var se=te;const ae={class:"flex flex-col min-h-screen"},oe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 px-6 sm:px-8 lg:px-12 py-8"},ne={class:"flex flex-row gap-4"};function le(e,t,s,a,n,l){const r=(0,o.g2)("Button"),i=(0,o.g2)("p-card");return(0,o.uX)(),(0,o.CE)("div",ae,[t[9]||(t[9]=(0,o.Lk)("div",{class:"w-full bg-cover bg-center flex items-center justify-center text-center text-white relative",style:{"background-image":"url('/assets/swms_banner_dark.png')",height:"60vh"}},[(0,o.Lk)("h1",{class:"text-4xl font-bold text-shadow-lg"},"Welcome to SWMS")],-1)),(0,o.Lk)("div",oe,[(0,o.bF)(i,{class:"service-card bg-red-600"},{title:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.Lk)("h3",{class:"text-xl font-semibold text-gray"},"Submit Concerns",-1)]))),content:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.Lk)("p",{class:"text-gray"},"Easily submit waste management complaints.",-1)]))),footer:(0,o.k6)((()=>[(0,o.bF)(r,{label:"Submit Complaint",icon:"pi pi-file",class:"w-full p-button-success p-button-text",onClick:l.goToComplainPage},null,8,["onClick"])])),_:1}),(0,o.bF)(i,{class:"service-card bg-green-600"},{title:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.Lk)("h3",{class:"text-xl font-semibold text-gray"},"Announcements",-1)]))),content:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.Lk)("p",{class:"text-gray"},"Stay updated with the latest announcements and notifications.",-1)]))),footer:(0,o.k6)((()=>[(0,o.bF)(r,{label:"View Announcements",icon:"pi pi-megaphone",class:"w-full p-button-info p-button-text",onClick:l.goToAnnouncementPage},null,8,["onClick"])])),_:1}),(0,o.bF)(i,{class:"service-card bg-blue-600"},{title:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.Lk)("h3",{class:"text-xl font-semibold text-gray"},"Analytics",-1)]))),content:(0,o.k6)((()=>[(0,o.Lk)("div",ne,[(0,o.bF)(i,{class:"flex-1 bg-white text-center"},{title:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.Lk)("h4",{class:"text-sm font-semibold text-blue-600"},"Total No. Concerns",-1)]))),content:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("p",{class:"text-xl font-bold text-gray-800"},"123",-1)]))),_:1}),(0,o.bF)(i,{class:"flex-1 bg-white text-center"},{title:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.Lk)("h4",{class:"text-sm font-semibold text-green-600"},"No. Resolved Concerns",-1)]))),content:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.Lk)("p",{class:"text-xl font-bold text-gray-800"},"98",-1)]))),_:1})])])),_:1})])])}var re={name:"LandingPage",components:{"p-card":I.A},created(){this.checkIfLoggedIn()},methods:{checkIfLoggedIn(){const e=localStorage.getItem("auth_token");e&&this.$router.push({name:"DashboardPage"})},goToComplainPage(){this.$router.push({name:"ComplainPage"})},goToAnnouncementPage(){this.$router.push({name:"DashboardPage"})}}};const ie=(0,h.A)(re,[["render",le],["__scopeId","data-v-1916dc86"]]);var ce=ie;const de={class:"space-y-8"},ue={key:0,class:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md space-y-4"},me={key:1,class:"max-w-md mx-auto text-center text-gray-700 text-lg"};function ge(e,t,s,n,l,r){const i=(0,o.g2)("FileUpload"),c=(0,o.g2)("Toast");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",de,[l.isLoggedIn?((0,o.uX)(),(0,o.CE)("div",ue,[t[13]||(t[13]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-800"},"Create New Announcement",-1)),(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>r.submitAnnouncement&&r.submitAnnouncement(...e)),["prevent"])),class:"space-y-4"},[(0,o.Lk)("div",null,[t[7]||(t[7]=(0,o.Lk)("label",{for:"subject",class:"block text-sm font-medium text-gray-700 mb-1"},"Subject",-1)),(0,o.bo)((0,o.Lk)("select",{id:"subject","onUpdate:modelValue":t[0]||(t[0]=e=>l.subject=e),class:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"},t[6]||(t[6]=[(0,o.Fv)('<option value="" disabled data-v-6cf0d167>Select a subject</option><option value="Delay of Garbage Pickup" data-v-6cf0d167>Delay of Garbage Pickup</option><option value="No Pickup Schedule" data-v-6cf0d167>No Pickup Schedule</option><option value="Schedule of Pickup" data-v-6cf0d167>Schedule of Pickup</option><option value="Program" data-v-6cf0d167>Program</option>',5)]),512),[[a.u1,l.subject]])]),(0,o.Lk)("div",null,[t[8]||(t[8]=(0,o.Lk)("label",{for:"dateTime",class:"block text-sm font-medium text-gray-700 mb-1"},"Date and Time",-1)),(0,o.bo)((0,o.Lk)("input",{type:"datetime-local",id:"dateTime","onUpdate:modelValue":t[1]||(t[1]=e=>l.dateTime=e),class:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"},null,512),[[a.Jo,l.dateTime]])]),(0,o.Lk)("div",null,[t[9]||(t[9]=(0,o.Lk)("label",{for:"route",class:"block text-sm font-medium text-gray-700 mb-1"},"Route",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"route","onUpdate:modelValue":t[2]||(t[2]=e=>l.route=e),placeholder:"Enter the route",class:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"},null,512),[[a.Jo,l.route]])]),(0,o.Lk)("div",null,[t[10]||(t[10]=(0,o.Lk)("label",{for:"context",class:"block text-sm font-medium text-gray-700 mb-1"},"Context",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"context","onUpdate:modelValue":t[3]||(t[3]=e=>l.context=e),rows:"4",placeholder:"Enter the context of the announcement",class:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"},null,512),[[a.Jo,l.context]])]),(0,o.Lk)("div",null,[t[11]||(t[11]=(0,o.Lk)("label",{for:"photo",class:"block text-sm font-medium text-gray-700 mb-1"},"Photo",-1)),(0,o.bF)(i,{ref:"fileupload",mode:"basic",id:"photo",modelValue:l.photo,"onUpdate:modelValue":t[4]||(t[4]=e=>l.photo=e),chooseLabel:"Choose a photo",accept:"image/*",class:"w-full"},null,8,["modelValue"])]),t[12]||(t[12]=(0,o.Lk)("div",{class:"flex justify-center"},[(0,o.Lk)("button",{type:"submit",class:"w-full py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"}," Submit ")],-1))],32)])):((0,o.uX)(),(0,o.CE)("div",me,t[14]||(t[14]=[(0,o.eW)(" Please "),(0,o.Lk)("a",{href:"/login",class:"text-green-600 hover:underline"},"log in",-1),(0,o.eW)(" to create an announcement. ")])))]),(0,o.bF)(c,{ref:"toast"},null,512)],64)}var pe={name:"AnnouncementPage",components:{FileUpload:Q.A},data(){return{subject:"",dateTime:null,route:"",context:"",photo:null,isLoggedIn:!1,userName:""}},mounted(){const e=localStorage.getItem("auth_token");e&&(console.log("test token"),this.isLoggedIn=!0,this.fetchUserDetails(e))},methods:{async fetchUserDetails(e){try{const t=await g.A.get("http://127.0.0.1:8000/api/user",{headers:{Authorization:`Bearer ${e}`}});this.userName=t.data.name}catch(t){console.error("Error fetching user details:",t)}},async submitAnnouncement(){const e=new FormData;e.append("subject",this.subject),e.append("dateTime",this.dateTime),e.append("route",this.route),e.append("context",this.context),this.photo&&this.photo[0]&&e.append("photo",this.photo[0]);try{const t=await g.A.post("http://127.0.0.1:8000/api/announcements",e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});this.showSuccessToast(t.data.message),this.subject="",this.dateTime=null,this.route="",this.context="",this.photo=null}catch(t){console.error("Error creating announcement:",t),this.showErrorToast(t)}},showSuccessToast(e){this.$refs.toast.add({severity:"success",summary:"Success",detail:e,life:3e3})},showErrorToast(e){this.$refs.toast.add({severity:"error",summary:"Error",detail:e,life:3e3})}}};const he=(0,h.A)(pe,[["render",ge],["__scopeId","data-v-6cf0d167"]]);var be=he,fe=s(4232);const ye={class:"space-y-8"},ve={class:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md"},ke={class:"flex space-x-4 mb-4"},xe={class:"mb-4"},Ce={class:"space-y-4"},Le=["onClick"],we={class:"text-lg font-medium text-gray-800"},Ae={class:"text-sm text-gray-600"},De={class:"text-sm text-gray-600"},_e={key:0,class:"text-sm text-green-600"},Fe={key:1,class:"text-sm text-red-600"},Ee={class:"text-lg font-semibold text-gray-800"},Te={class:"mt-2 text-gray-700"},Se={key:0,class:"mt-4"},je=["src"],Ve={class:"mt-4"},Ie={class:"text-sm text-gray-600"},Pe={class:"text-sm text-gray-600"},Me={class:"text-sm text-gray-600"},Xe={class:"mt-6 flex justify-end space-x-4"},$e=["value"],Ue={class:"mt-4 flex justify-end space-x-4"};function Re(e,t,s,n,l,r){const i=(0,o.g2)("Dialog"),c=(0,o.g2)("Toast");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",ye,[(0,o.Lk)("div",ve,[t[12]||(t[12]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-800"},"Concerns Management",-1)),(0,o.Lk)("div",ke,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>l.activeTab="pending"),class:(0,fe.C4)([{"bg-green-500 text-white":"pending"===l.activeTab},"px-4 py-2 rounded-lg"])},"Pending Verification",2),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>l.activeTab="assigned"),class:(0,fe.C4)([{"bg-blue-500 text-white":"assigned"===l.activeTab},"px-4 py-2 rounded-lg"])},"Assigned Concerns",2),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>l.activeTab="all"),class:(0,fe.C4)([{"bg-gray-500 text-white":"all"===l.activeTab},"px-4 py-2 rounded-lg"])},"All Concerns",2)]),(0,o.Lk)("div",xe,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.searchQuery=e),placeholder:"Search concerns...",class:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a.Jo,l.searchQuery]])]),(0,o.Lk)("div",Ce,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.filteredConcerns,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,onClick:t=>r.openModal(e),class:"p-4 bg-gray-100 rounded-lg shadow-sm cursor-pointer hover:bg-gray-200"},[(0,o.Lk)("h3",we,(0,fe.v_)(e.title),1),(0,o.Lk)("p",Ae,"Submitted by: "+(0,fe.v_)(e.submittedBy),1),(0,o.Lk)("p",De,"Date: "+(0,fe.v_)(e.date),1),1===e.isVerified?((0,o.uX)(),(0,o.CE)("p",_e,"Verified")):(0,o.Q3)("",!0),9===e.isVerified?((0,o.uX)(),(0,o.CE)("p",Fe,"Rejected")):(0,o.Q3)("",!0)],8,Le)))),128))])]),l.selectedConcern?((0,o.uX)(),(0,o.Wv)(i,{key:0,header:"Concern Details",visible:l.showModal,"onUpdate:visible":t[7]||(t[7]=e=>l.showModal=e),modal:"",class:"concern-modal",style:{width:"40vw","max-width":"600px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[(0,o.Lk)("h3",Ee,(0,fe.v_)(l.selectedConcern.title),1),(0,o.Lk)("p",Te,(0,fe.v_)(l.selectedConcern.description),1),l.selectedConcern.image?((0,o.uX)(),(0,o.CE)("div",Se,[t[13]||(t[13]=(0,o.Lk)("p",{class:"text-sm font-medium text-gray-700"},"Attached Image:",-1)),(0,o.Lk)("img",{src:l.selectedConcern.image,alt:"Concern Image",class:"w-full h-auto mt-2 rounded-lg"},null,8,je)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Ve,[(0,o.Lk)("p",Ie,[t[14]||(t[14]=(0,o.Lk)("strong",null,"Submitted by:",-1)),(0,o.eW)(" "+(0,fe.v_)(l.selectedConcern.submittedBy),1)]),(0,o.Lk)("p",Pe,[t[15]||(t[15]=(0,o.Lk)("strong",null,"Date:",-1)),(0,o.eW)(" "+(0,fe.v_)(l.selectedConcern.date),1)]),(0,o.Lk)("p",Me,[t[16]||(t[16]=(0,o.Lk)("strong",null,"Address:",-1)),(0,o.eW)(" "+(0,fe.v_)(l.selectedConcern.address),1)])])]),(0,o.Lk)("div",Xe,[null===l.selectedConcern.isVerified?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",onClick:t[4]||(t[4]=(...e)=>r.verifyConcern&&r.verifyConcern(...e))},"Verify")):(0,o.Q3)("",!0),null===l.selectedConcern.isVerified?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",onClick:t[5]||(t[5]=(...e)=>r.rejectConcern&&r.rejectConcern(...e))},"Reject")):(0,o.Q3)("",!0),1!==l.selectedConcern.isVerified||l.selectedConcern.isAssigned?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:2,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:t[6]||(t[6]=(...e)=>r.openAssignmentDialog&&r.openAssignmentDialog(...e))},"Assign"))])])),_:1},8,["visible"])):(0,o.Q3)("",!0),l.showAssignmentDialog?((0,o.uX)(),(0,o.Wv)(i,{key:1,header:"Assign to Driver",visible:l.showAssignmentDialog,"onUpdate:visible":t[11]||(t[11]=e=>l.showAssignmentDialog=e),modal:"",class:"assign-dialog",style:{width:"30vw","max-width":"500px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[t[17]||(t[17]=(0,o.Lk)("label",{for:"driverSelect",class:"text-sm text-gray-700"},"Select Driver",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.selectedDriver=e),id:"driverSelect",class:"w-full p-2 mt-2 border border-gray-300 rounded-lg"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.drivers,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,fe.v_)(e.name),9,$e)))),128))],512),[[a.u1,l.selectedDriver]])]),(0,o.Lk)("div",Ue,[(0,o.Lk)("button",{class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",onClick:t[9]||(t[9]=(...e)=>r.closeAssignmentDialog&&r.closeAssignmentDialog(...e))},"Cancel"),(0,o.Lk)("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:t[10]||(t[10]=(...e)=>r.assignToDriver&&r.assignToDriver(...e))},"Assign")])])),_:1},8,["visible"])):(0,o.Q3)("",!0)]),(0,o.bF)(c,{ref:"toast"},null,512)],64)}var Be={name:"ConcernPage",data(){return{searchQuery:"",showModal:!1,showAssignmentDialog:!1,selectedConcern:null,selectedDriver:null,concerns:[],drivers:[],activeTab:"pending"}},computed:{filteredConcerns(){const e=this.concerns.filter((e=>"pending"===this.activeTab?null===e.isVerified:"assigned"!==this.activeTab||null===e.isAssigned));return this.searchQuery?e.filter((e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase()))):e}},methods:{async fetchConcerns(){let e="http://127.0.0.1:8000/api/complaints";"pending"===this.activeTab?e="http://127.0.0.1:8000/api/complaints/verification":"assigned"===this.activeTab&&(e="http://127.0.0.1:8000/api/complaints/assignment");try{const t=await g.A.get(e);this.concerns=t.data.data.map((e=>({id:e.id,title:e.subject,description:e.description,submittedBy:e.email,date:new Date(e.created_at).toLocaleDateString(),address:e.address,image:e.file_path||"",isVerified:e.is_verified,isAssigned:e.is_assigned,assignedTo:e.assigned_to,assignedDate:e.assigned_date})))}catch(t){console.error("Error fetching concerns:",t)}},openModal(e){this.selectedConcern=e,this.showModal=!0},async verifyConcern(){try{await g.A.put(`http://127.0.0.1:8000/api/complaints/${this.selectedConcern.id}`,{is_verified:1}),this.$refs.toast.add({severity:"success",summary:"Verified Successfully",detail:`Concern "${this.selectedConcern.title}" has been verified.`,life:3e3}),this.showModal=!1,this.fetchConcerns()}catch(e){console.error("Error verifying concern:",e),this.$refs.toast.add({severity:"error",summary:"Verification failed",detail:e.response.data.message,life:3e3})}},async rejectConcern(){try{await g.A.put(`http://127.0.0.1:8000/api/complaints/${this.selectedConcern.id}`,{is_verified:9}),this.$refs.toast.add({severity:"success",summary:"Rejected Successfully",detail:`Concern "${this.selectedConcern.title}" has been rejected.`,life:3e3}),this.fetchConcerns()}catch(e){console.error("Error rejecting concern:",e),this.$refs.toast.add({severity:"error",summary:"Rejection failed",detail:e.response.data.message,life:3e3})}},openAssignmentDialog(){this.fetchDrivers(),this.showAssignmentDialog=!0},closeAssignmentDialog(){this.showAssignmentDialog=!1},async fetchDrivers(){try{const e=await g.A.get("http://127.0.0.1:8000/api/drivers");console.log(e),this.drivers=e.data.drivers}catch(e){console.error("Error fetching drivers:",e)}},async assignToDriver(){try{await g.A.put(`http://127.0.0.1:8000/api/complaints/${this.selectedConcern.id}/assign`,{is_assigned:1,assigned_to:this.selectedDriver}),this.$refs.toast.add({severity:"success",summary:"Assigned Successfully",detail:`Concern "${this.selectedConcern.title}" has been assigned.`,life:3e3}),this.fetchConcerns(),this.closeAssignmentDialog(),this.showModal=!1}catch(e){console.error("Error assigning concern to driver:",e),this.$refs.toast.add({severity:"error",summary:"Assignment Failed",detail:e.response.data.message,life:3e3})}}},watch:{activeTab(){this.fetchConcerns()}},mounted(){this.fetchConcerns()}};const We=(0,h.A)(Be,[["render",Re],["__scopeId","data-v-eb3f3d7c"]]);var Ne=We;const Qe={class:"space-y-8"},Oe={class:"max-w-5xl mx-auto p-6 bg-white rounded-lg shadow-md"},Ke={class:"flex border-b border-gray-200 mb-6"},ze={key:0,class:"space-y-6"},qe=["value"],Ge={key:1,class:"space-y-6"},Je={class:"text-lg font-semibold text-gray-800 mb-2"},He={class:"bg-white shadow rounded-lg p-4"},Ye={key:1};function Ze(e,t,s,n,l,r){return(0,o.uX)(),(0,o.CE)("div",Qe,[(0,o.Lk)("div",Oe,[t[15]||(t[15]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-800 mb-6"},"Messaging",-1)),(0,o.Lk)("div",Ke,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>l.tab="compose"),class:(0,fe.C4)(["px-4 py-2 focus:outline-none","compose"===l.tab?"text-green-600 border-b-2 border-green-600":"text-gray-600"])}," Compose ",2),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>l.tab="messages"),class:(0,fe.C4)(["px-4 py-2 focus:outline-none","messages"===l.tab?"text-green-600 border-b-2 border-green-600":"text-gray-600"])}," Messages ",2)]),"compose"===l.tab?((0,o.uX)(),(0,o.CE)("div",ze,[t[13]||(t[13]=(0,o.Lk)("h3",{class:"text-lg font-semibold text-gray-800"},"Compose Message",-1)),(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>r.sendMessage&&r.sendMessage(...e)),["prevent"])),class:"space-y-4"},[(0,o.Lk)("div",null,[t[8]||(t[8]=(0,o.Lk)("label",{for:"recipient",class:"block text-sm font-medium text-gray-700 mb-1"},"Recipient",-1)),(0,o.bo)((0,o.Lk)("select",{id:"recipient","onUpdate:modelValue":t[2]||(t[2]=e=>l.compose.recipient=e),class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[t[7]||(t[7]=(0,o.Lk)("option",{value:"",disabled:""},"Select a recipient",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.users,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,fe.v_)(e.name),9,qe)))),128))],512),[[a.u1,l.compose.recipient]])]),(0,o.Lk)("div",null,[t[9]||(t[9]=(0,o.Lk)("label",{for:"subject",class:"block text-sm font-medium text-gray-700 mb-1"},"Subject",-1)),(0,o.bo)((0,o.Lk)("input",{id:"subject","onUpdate:modelValue":t[3]||(t[3]=e=>l.compose.subject=e),type:"text",placeholder:"Enter subject",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a.Jo,l.compose.subject]])]),(0,o.Lk)("div",null,[t[10]||(t[10]=(0,o.Lk)("label",{for:"message",class:"block text-sm font-medium text-gray-700 mb-1"},"Message",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"message","onUpdate:modelValue":t[4]||(t[4]=e=>l.compose.message=e),rows:"5",placeholder:"Write your message here...",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a.Jo,l.compose.message]])]),(0,o.Lk)("div",null,[t[11]||(t[11]=(0,o.Lk)("label",{for:"attachment",class:"block text-sm font-medium text-gray-700 mb-1"},"Attach Image",-1)),(0,o.Lk)("input",{type:"file",id:"attachment",accept:"image/*",onChange:t[5]||(t[5]=(...e)=>r.onFileChange&&r.onFileChange(...e)),class:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,32)]),t[12]||(t[12]=(0,o.Lk)("div",{class:"flex justify-center"},[(0,o.Lk)("button",{type:"submit",class:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"}," Send ")],-1))],32)])):(0,o.Q3)("",!0),"messages"===l.tab?((0,o.uX)(),(0,o.CE)("div",Ge,[t[14]||(t[14]=(0,o.Lk)("h3",{class:"text-lg font-semibold text-gray-800"},"Messages",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.groupedMessages,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"border-b pb-4 mb-4"},[(0,o.Lk)("h4",Je,(0,fe.v_)(r.getUserNameById(t)),1),(0,o.Lk)("ul",He,[Array.isArray(e)?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:0},(0,o.pI)(e,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id,class:"border-b py-2"},[(0,o.Lk)("strong",null,(0,fe.v_)(e.subject),1),(0,o.eW)(" - "+(0,fe.v_)(e.message),1)])))),128)):((0,o.uX)(),(0,o.CE)("li",Ye,"No messages available"))])])))),128))])):(0,o.Q3)("",!0)])])}s(2577);var et={data(){return{tab:"messages",compose:{recipient:"",subject:"",message:"",attachment:null},messages:[],groupedMessages:{},users:[]}},mounted(){this.fetchMessages(),this.fetchUsers()},methods:{async fetchUsers(){try{const e=await g.A.get("http://127.0.0.1:8000/api/users",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});this.users=e.data}catch(e){console.error(e),alert("Failed to load users.")}},async sendMessage(){if(!this.compose.recipient||!this.compose.subject||!this.compose.message)return void alert("All fields are required.");const e=new FormData;e.append("recipient",this.compose.recipient),e.append("subject",this.compose.subject),e.append("message",this.compose.message),this.compose.attachment&&e.append("attachment",this.compose.attachment);try{await g.A.post("http://127.0.0.1:8000/api/messages/send",e,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"multipart/form-data"}}),alert("Message sent successfully."),this.fetchMessages(),this.compose={recipient:"",subject:"",message:"",attachment:null}}catch(t){console.error(t),alert("Failed to send message.")}},async fetchMessages(){try{const e=await g.A.get("http://127.0.0.1:8000/api/messages",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});console.log("API Response:",e),e.data&&"object"===typeof e.data?(this.messages=e.data,this.groupMessagesByRecipient()):(console.error("Unexpected response format:",e.data),alert("Failed to load messages. Invalid response format."))}catch(e){console.error("Error fetching messages:",e),alert("Failed to load messages.")}},groupMessagesByRecipient(){"object"===typeof this.messages&&null!==this.messages?(this.groupedMessages={},Object.keys(this.messages).forEach((e=>{const t=this.messages[e].messages;this.groupedMessages[e]=t}))):console.error("Expected messages data to be an object:",this.messages)},getUserNameById(e){const t=this.users.find((t=>t.id===e));return t?t.name:"Unknown User"},onFileChange(e){const t=e.target.files[0];t&&(this.compose.attachment=t)}}};const tt=(0,h.A)(et,[["render",Ze]]);var st=tt;const at={class:"space-y-8"},ot={class:"mx-auto p-10"},nt={class:"flex items-center justify-between"},lt={class:"flex flex-col md:flex-row gap-8 mt-6"},rt={class:"flex-1 overflow-x-auto"},it={class:"min-w-full bg-white border border-gray-200"},ct={class:"px-4 py-2 border-b border-gray-300 text-sm text-gray-700"},dt={class:"px-4 py-2 border-b border-gray-300 text-sm text-gray-700"},ut={class:"px-4 py-2 border-b border-gray-300 text-sm text-gray-700"},mt={class:"px-4 py-2 border-b border-gray-300 text-sm text-gray-700"},gt={class:"px-4 py-2 border-b border-gray-300 text-sm text-gray-700"},pt={class:"px-4 py-2 border-b border-gray-300 text-sm text-gray-700"};function ht(e,t,s,a,n,l){return(0,o.uX)(),(0,o.CE)("div",at,[(0,o.Lk)("div",ot,[(0,o.Lk)("div",nt,[t[1]||(t[1]=(0,o.Lk)("h2",{class:"text-2xl font-semibold text-gray-800"},"Reports",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.exportToExcel&&l.exportToExcel(...e)),class:"py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"}," Export to Excel ")]),(0,o.Lk)("div",lt,[(0,o.Lk)("div",rt,[(0,o.Lk)("table",it,[t[2]||(t[2]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{class:"px-4 py-2 border-b border-gray-300 text-left text-sm font-semibold text-white bg-green-500"},"Area"),(0,o.Lk)("th",{class:"px-4 py-2 border-b border-gray-300 text-left text-sm font-semibold text-white bg-green-500"},"Total Number of Concern for Concern 1"),(0,o.Lk)("th",{class:"px-4 py-2 border-b border-gray-300 text-left text-sm font-semibold text-white bg-green-500"},"Total Number of Concern for Concern 2"),(0,o.Lk)("th",{class:"px-4 py-2 border-b border-gray-300 text-left text-sm font-semibold text-white bg-green-500"},"Total Number of Concern for Concern 3"),(0,o.Lk)("th",{class:"px-4 py-2 border-b border-gray-300 text-left text-sm font-semibold text-white bg-green-500"},"Total Number of Concerns"),(0,o.Lk)("th",{class:"px-4 py-2 border-b border-gray-300 text-left text-sm font-semibold text-white bg-green-500"},"Total Number of Resolved Concerns")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.reportData,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t,class:"hover:bg-gray-100"},[(0,o.Lk)("td",ct,(0,fe.v_)(e.area),1),(0,o.Lk)("td",dt,(0,fe.v_)(e.concern1),1),(0,o.Lk)("td",ut,(0,fe.v_)(e.concern2),1),(0,o.Lk)("td",mt,(0,fe.v_)(e.concern3),1),(0,o.Lk)("td",gt,(0,fe.v_)(e.totalConcerns),1),(0,o.Lk)("td",pt,(0,fe.v_)(e.resolvedConcerns),1)])))),128))])])]),t[3]||(t[3]=(0,o.Fv)('<div class="space-y-6" data-v-3133977a><div data-v-3133977a><h3 class="text-sm font-semibold text-gray-800 mb-2" data-v-3133977a>Concerns by Area</h3><canvas id="concernsByArea" data-v-3133977a></canvas></div><div data-v-3133977a><h3 class="text-sm font-semibold text-gray-800 mb-2" data-v-3133977a>Concerns Breakdown</h3><canvas id="concernsBreakdown" data-v-3133977a></canvas></div></div>',1))])])])}s(8872);var bt=s(6912),ft=s(3230);bt.t1.register(...bt.$L);var yt={name:"ReportsPage",data(){return{reportData:[{area:"Area 1",concern1:5,concern2:10,concern3:3,totalConcerns:18,resolvedConcerns:12},{area:"Area 2",concern1:8,concern2:6,concern3:7,totalConcerns:21,resolvedConcerns:15}]}},mounted(){this.renderCharts()},methods:{renderCharts(){const e=document.getElementById("concernsByArea").getContext("2d");new bt.t1(e,{type:"bar",data:{labels:this.reportData.map((e=>e.area)),datasets:[{label:"Total Concerns",data:this.reportData.map((e=>e.totalConcerns)),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"}}}});const t=document.getElementById("concernsBreakdown").getContext("2d");new bt.t1(t,{type:"pie",data:{labels:["Concern 1","Concern 2","Concern 3"],datasets:[{data:[this.reportData.reduce(((e,t)=>e+t.concern1),0),this.reportData.reduce(((e,t)=>e+t.concern2),0),this.reportData.reduce(((e,t)=>e+t.concern3),0)],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"}}}})},exportToExcel(){const e=ft.Wp.json_to_sheet(this.reportData),t={font:{bold:!0},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},alignment:{horizontal:"center",vertical:"center"}},s={border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},a=ft.Wp.decode_range(e["!ref"]);for(let n=a.s.c;n<=a.e.c;n++){const o=e[ft.Wp.encode_cell({r:0,c:n})];o&&(o.s=t);for(let t=a.s.r+1;t<=a.e.r;t++){const a=e[ft.Wp.encode_cell({r:t,c:n})];a&&(a.s=s)}}const o=ft.Wp.book_new();ft.Wp.book_append_sheet(o,e,"Reports"),ft._h(o,"Reports.xlsx")}}};const vt=(0,h.A)(yt,[["render",ht],["__scopeId","data-v-3133977a"]]);var kt=vt;const xt={class:"p-6 bg-gray-50 min-h-screen"},Ct={class:"field mb-4"},Lt={class:"field mb-4"},wt={class:"field mb-4"},At={class:"flex justify-end space-x-2"},Dt={class:"flex space-x-2"},_t={class:"field mb-4"},Ft={class:"field mb-4"},Et={class:"field mb-4"},Tt={class:"flex justify-end space-x-2"},St={class:"flex justify-end space-x-2"};function jt(e,t,s,n,l,r){const i=(0,o.g2)("Button"),c=(0,o.g2)("InputText"),d=(0,o.g2)("Select"),u=(0,o.g2)("Dialog"),m=(0,o.g2)("Column"),g=(0,o.g2)("DataTable"),p=(0,o.g2)("Toast");return(0,o.uX)(),(0,o.CE)("div",xt,[t[22]||(t[22]=(0,o.Lk)("h1",{class:"text-3xl font-semibold mb-6 text-gray-800"},"Account Management",-1)),(0,o.bF)(i,{label:"Create Account",icon:"pi pi-plus",severity:"info",class:"mb-6 px-6 py-3 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-all",onClick:t[0]||(t[0]=e=>l.showCreateDialog=!0)}),(0,o.bF)(u,{visible:l.showCreateDialog,"onUpdate:visible":t[6]||(t[6]=e=>l.showCreateDialog=e),header:"Create Account",modal:!0,closable:!0,style:{width:"35vw"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>r.createAccount&&r.createAccount(...e)),["prevent"]))},[(0,o.Lk)("div",Ct,[t[15]||(t[15]=(0,o.Lk)("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),(0,o.bF)(c,{id:"name",modelValue:l.formData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.name=e),type:"text",class:"w-full mt-1 border-gray-300 rounded-lg shadow-sm",required:""},null,8,["modelValue"])]),(0,o.Lk)("div",Lt,[t[16]||(t[16]=(0,o.Lk)("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),(0,o.bF)(c,{id:"email",modelValue:l.formData.email,"onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.email=e),type:"email",class:"w-full mt-1 border-gray-300 rounded-lg shadow-sm",required:""},null,8,["modelValue"])]),(0,o.Lk)("div",wt,[t[17]||(t[17]=(0,o.Lk)("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Role",-1)),(0,o.bF)(d,{id:"role",modelValue:l.formData.role,"onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.role=e),options:l.roles,"option-label":"label","option-value":"value",placeholder:"Select a role",class:"w-full mt-1 border-gray-300 rounded-lg shadow-sm"},null,8,["modelValue","options"])]),(0,o.Lk)("div",At,[(0,o.bF)(i,{label:"Cancel",severity:"secondary",onClick:t[4]||(t[4]=e=>l.showCreateDialog=!1)}),(0,o.bF)(i,{label:"Save",type:"submit",severity:"success"})])],32)])),_:1},8,["visible"]),(0,o.bF)(g,{value:l.accounts,paginator:"",rows:10,stripedRows:""},{default:(0,o.k6)((()=>[(0,o.bF)(m,{field:"name",header:"Name"}),(0,o.bF)(m,{field:"email",header:"Email"}),(0,o.bF)(m,{field:"role",header:"Role"}),(0,o.bF)(m,{header:"Actions"},{body:(0,o.k6)((e=>[(0,o.Lk)("div",Dt,[(0,o.bF)(i,{icon:"pi pi-pencil",severity:"success",class:"p-button-rounded p-button-text",onClick:t=>r.editAccount(e.data)},null,8,["onClick"]),(0,o.bF)(i,{icon:"pi pi-trash",severity:"danger",class:"p-button-rounded p-button-text",onClick:t=>r.confirmDeleteAccount(e.data)},null,8,["onClick"])])])),_:1})])),_:1},8,["value"]),(0,o.bF)(u,{visible:l.showEditDialog,"onUpdate:visible":t[12]||(t[12]=e=>l.showEditDialog=e),header:"Edit Account",modal:!0,closable:!0,style:{width:"35vw"}},{default:(0,o.k6)((()=>[(0,o.Lk)("form",{onSubmit:t[11]||(t[11]=(0,a.D$)(((...e)=>r.updateAccount&&r.updateAccount(...e)),["prevent"]))},[(0,o.Lk)("div",_t,[t[18]||(t[18]=(0,o.Lk)("label",{for:"edit-name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),(0,o.bF)(c,{id:"edit-name",modelValue:l.editData.name,"onUpdate:modelValue":t[7]||(t[7]=e=>l.editData.name=e),type:"text",class:"w-full mt-1 border-gray-300 rounded-lg shadow-sm",required:""},null,8,["modelValue"])]),(0,o.Lk)("div",Ft,[t[19]||(t[19]=(0,o.Lk)("label",{for:"edit-email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),(0,o.bF)(c,{id:"edit-email",modelValue:l.editData.email,"onUpdate:modelValue":t[8]||(t[8]=e=>l.editData.email=e),type:"email",class:"w-full mt-1 border-gray-300 rounded-lg shadow-sm",required:""},null,8,["modelValue"])]),(0,o.Lk)("div",Et,[t[20]||(t[20]=(0,o.Lk)("label",{for:"edit-role",class:"block text-sm font-medium text-gray-700"},"Role",-1)),(0,o.bF)(d,{id:"edit-role",modelValue:l.editData.role,"onUpdate:modelValue":t[9]||(t[9]=e=>l.editData.role=e),options:l.roles,"option-label":"label","option-value":"value",placeholder:"Select a role",class:"w-full mt-1 border-gray-300 rounded-lg shadow-sm"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Tt,[(0,o.bF)(i,{label:"Cancel",class:"text-gray-600 hover:text-gray-900",onClick:t[10]||(t[10]=e=>l.showEditDialog=!1)}),(0,o.bF)(i,{label:"Update",type:"submit",class:"primary px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-all"})])],32)])),_:1},8,["visible"]),(0,o.bF)(u,{visible:l.showConfirmDialog,"onUpdate:visible":t[14]||(t[14]=e=>l.showConfirmDialog=e),header:"Confirm Deletion",modal:!0,closable:!0,style:{width:"30vw"}},{default:(0,o.k6)((()=>[t[21]||(t[21]=(0,o.Lk)("p",null,"Are you sure you want to delete this account?",-1)),(0,o.Lk)("div",St,[(0,o.bF)(i,{label:"Cancel",severity:"secondary",onClick:t[13]||(t[13]=e=>l.showConfirmDialog=!1)}),(0,o.bF)(i,{label:"Confirm",severity:"success",onClick:r.deleteAccount},null,8,["onClick"])])])),_:1},8,["visible"]),(0,o.bF)(p,{ref:"toast"},null,512)])}var Vt={data(){return{showCreateDialog:!1,showEditDialog:!1,showConfirmDialog:!1,roles:[],accounts:[],formData:{name:"",email:"",role:""},editData:{},selectedAccount:null}},created(){this.fetchAccounts(),this.fetchRoles()},methods:{fetchAccounts(){g.A.get("http://127.0.0.1:8000/api/users").then((e=>{this.accounts=e.data})).catch((e=>{this.showErrorToast("Failed to fetch accounts",e)}))},fetchRoles(){g.A.get("http://127.0.0.1:8000/api/roles").then((e=>{this.roles=e.data.map((e=>({label:e.user_role,value:e.id})))})).catch((e=>{this.showErrorToast("Failed to fetch roles",e)}))},createAccount(){g.A.post("http://127.0.0.1:8000/api/users",this.formData).then((e=>{this.accounts.push(e.data),this.resetFormData(),this.showCreateDialog=!1,this.fetchAccounts(),this.showSuccessToast("Account created successfully")})).catch((e=>{this.showErrorToast("Failed to create account",e)}))},editAccount(e){this.editData={...e},this.showEditDialog=!0},updateAccount(){g.A.put(`http://127.0.0.1:8000/api/users/${this.editData.id}`,this.editData).then((e=>{const t=this.accounts.findIndex((e=>e.id===this.editData.id));-1!==t&&this.accounts.splice(t,1,e.data),this.showEditDialog=!1,this.fetchAccounts(),this.showSuccessToast("Account updated successfully")})).catch((e=>{this.showErrorToast("Failed to update account",e)}))},confirmDeleteAccount(e){this.selectedAccount=e,this.showConfirmDialog=!0},deleteAccount(){g.A.delete(`http://127.0.0.1:8000/api/users/${this.selectedAccount.id}`).then((e=>{this.accounts=this.accounts.filter((e=>e.id!==this.selectedAccount.id)),this.showConfirmDialog=!1,this.fetchAccounts(),this.showSuccessToast("Account deleted successfully",e.data.message)})).catch((e=>{this.showErrorToast("Failed to delete account",e)}))},resetFormData(){this.formData={name:"",email:"",role:""}},showSuccessToast(e){this.$refs.toast.add({severity:"success",summary:"Success",detail:e,life:3e3})},showErrorToast(e){this.$refs.toast.add({severity:"error",summary:"Error",detail:e,life:3e3})}}};const It=(0,h.A)(Vt,[["render",jt]]);var Pt=It;const Mt={class:"dashboard"},Xt={class:"dashboard-actions"},$t={key:1,class:"announcement-placeholder"},Ut={key:2,class:"loading"},Rt={key:3,class:"no-announcements"},Bt={key:4,class:"announcement-feed"},Wt={class:"announcement-header"},Nt={class:"announcement-meta"},Qt={class:"announcement-body"},Ot={key:0,class:"announcement-image"},Kt=["src"],zt={class:"announcement-footer"};function qt(e,t,s,a,n,l){const r=(0,o.g2)("Button");return(0,o.uX)(),(0,o.CE)("div",Mt,[n.isLoggedIn?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("h1",null,"Welcome, "+(0,fe.v_)(n.username)+"!",1),(0,o.Lk)("div",Xt,[(0,o.bF)(r,{label:"Create Announcement",icon:"pi pi-plus",class:"p-button-success",onClick:l.navigateToCreateAnnouncement},null,8,["onClick"])])],64)):((0,o.uX)(),(0,o.CE)("div",$t,t[0]||(t[0]=[(0,o.Lk)("h1",{class:"text-2xl font-bold text-gray-800"},"Announcements",-1)]))),n.loading?((0,o.uX)(),(0,o.CE)("div",Ut,"Loading announcements...")):0===n.announcements.length?((0,o.uX)(),(0,o.CE)("div",Rt,t[1]||(t[1]=[(0,o.Lk)("p",null,"No announcements available. Be the first to create one!",-1)]))):((0,o.uX)(),(0,o.CE)("div",Bt,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.announcements,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id,class:"announcement-card"},[(0,o.Lk)("div",Wt,[(0,o.Lk)("div",{class:"avatar",style:(0,fe.Tr)({backgroundColor:l.getAvatarBackgroundColor(e.author)})},[(0,o.Lk)("span",null,(0,fe.v_)(l.getInitials(e.author)),1)],4),(0,o.Lk)("div",Nt,[(0,o.Lk)("h3",null,(0,fe.v_)(e.subject),1),(0,o.Lk)("small",null,(0,fe.v_)(l.formatDate(e.created_at)),1)])]),(0,o.Lk)("p",Qt,(0,fe.v_)(e.body),1),e.image_path?((0,o.uX)(),(0,o.CE)("div",Ot,[(0,o.Lk)("img",{src:`http://127.0.0.1:8000/storage/${e.image_path}`,alt:"Announcement Image",class:"resized-image"},null,8,Kt)])):(0,o.Q3)("",!0),(0,o.Lk)("div",zt,[(0,o.Lk)("small",null,"Effective Date: "+(0,fe.v_)(l.formatDate(e.effective_date)),1),t[2]||(t[2]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("small",null,"Posted by: "+(0,fe.v_)(e.author||"Unknown"),1)])])))),128))])]))])}var Gt=s(9740),Jt={data(){return{username:"",announcements:[],loading:!0,isLoggedIn:!1}},created(){this.checkAuthentication(),this.fetchAnnouncements()},methods:{checkAuthentication(){const e=localStorage.getItem("auth_token");e&&(this.isLoggedIn=!0,this.fetchUserData())},async fetchUserData(){try{const e=await g.A.get("http://127.0.0.1:8000/api/user/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});this.username=e.data.username||"User"}catch(e){console.error("Error fetching user data:",e)}},async fetchAnnouncements(){try{const e=await g.A.get("http://127.0.0.1:8000/api/announcements",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});this.announcements=e.data.data||[]}catch(e){console.error("Error fetching announcements:",e)}finally{this.loading=!1}},formatDate(e){return(0,Gt.GP)(new Date(e),"MMMM d, yyyy h:mm a")},navigateToCreateAnnouncement(){this.$router.push({name:"AnnouncementPage"})},getInitials(e){if(!e)return"";const t=e.split(" "),s=t[0]||"",a=t[1]||"";return(s[0]||"")+(a[0]||"")},getAvatarBackgroundColor(e){if(!e)return"#007bff";const t=["#FF5733","#33FF57","#3357FF","#FF33A6","#FFC300","#FF6347","#32CD32"],s=e.charCodeAt(0)%t.length;return t[s]}}};const Ht=(0,h.A)(Jt,[["render",qt],["__scopeId","data-v-d40e14ce"]]);var Yt=Ht,Zt=s(144);const es={class:"p-4"},ts={key:0},ss={key:1,class:"text-red-500"},as={key:2,class:"bg-white shadow rounded-lg p-4"},os={class:"font-semibold"};var ns={__name:"AssignedRoutesPage",setup(e){const t=(0,Zt.KR)([]),s=(0,Zt.KR)(!0),a=(0,Zt.KR)(null),n=async()=>{try{const e=await g.A.get("http://127.0.0.1:8000/api/complaints/routes");t.value=e.data}catch(e){a.value="Failed to load routes"}finally{s.value=!1}};return(0,o.sV)(n),(e,n)=>((0,o.uX)(),(0,o.CE)("div",es,[n[1]||(n[1]=(0,o.Lk)("h1",{class:"text-2xl font-bold mb-4"},"Assigned Routes",-1)),s.value?((0,o.uX)(),(0,o.CE)("div",ts,"Loading...")):a.value?((0,o.uX)(),(0,o.CE)("div",ss,(0,fe.v_)(a.value),1)):((0,o.uX)(),(0,o.CE)("ul",as,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.value,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id,class:"border-b py-2"},[(0,o.Lk)("div",os,(0,fe.v_)(e.name),1),(0,o.Lk)("div",null,(0,fe.v_)(e.description),1),(0,o.Lk)("div",null,[n[0]||(n[0]=(0,o.Lk)("strong",null,"Address:",-1)),(0,o.eW)(" "+(0,fe.v_)(e.address),1)])])))),128))]))]))}};const ls=(0,h.A)(ns,[["__scopeId","data-v-e5e1ffae"]]);var rs=ls;const is=[{path:"/",name:"Landingpage",component:ce},{path:"/ComplainPage",name:"ComplainPage",component:se},{path:"/AnnouncementPage",name:"AnnouncementPage",component:be},{path:"/ConcernPage",name:"ConcernPage",component:Ne},{path:"/MessagePage",name:"MessagePage",component:st},{path:"/ReportPage",name:"ReportPage",component:kt},{path:"/AccountManagementPage",name:"AccountManagementPage",component:Pt},{path:"/DashboardPage",name:"DashboardPage",component:Yt},{path:"/RoutesPage",name:"RoutesPage",component:rs}],cs=(0,O.aE)({history:(0,O.LA)(),routes:is});var ds=cs,us=s(3429),ms=s(3329),gs=s(3830);const ps=(0,a.Ef)(k);ps.use(x.Ay,{theme:{preset:C.A,options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}}});const hs={Drawer:L.A,Menubar:w.A,Dialog:A.A,InputText:D.A,Button:_.A,Fieldset:F.A,ConfirmDialog:$.A,FloatLabel:S.A,Select:j.A,DataTable:E.A,Column:T.A,Divider:V.A,Card:I.A,Tag:P.A,InputGroup:M.A,InputGroupAddon:X.A,Password:U.A,Checkbox:R.A,RadioButton:B.A,MultiSelect:W.A,DatePicker:N.A,FileUpload:Q.A,Toast:us.A,Textarea:ms.A,useToast:gs["default"]};Object.entries(hs).forEach((([e,t])=>{ps.component(e,t)})),ps.use(us.A),ps.use(ds),ps.mount("#app")}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,o,n){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],n=e[d][2];for(var r=!0,i=0;i<a.length;i++)(!1&n||l>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(r=!1,n<l&&(l=n));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,o,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,n,l=a[0],r=a[1],i=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(i)var d=i(s)}for(t&&t(a);c<l.length;c++)n=l[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunksolid_waste_management_system"]=self["webpackChunksolid_waste_management_system"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(8866)}));a=s.O(a)})();
//# sourceMappingURL=app.de4c6afd.js.map